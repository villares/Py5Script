<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Py5Script</title>
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ide.css">
    
    <!-- Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.3/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.5.0/lz-string.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

    <header>
        <h1><a href="https://github.com/esperanc/Py5Script"><img src="logo.svg" alt="Py5Script" style="height: 40px; vertical-align: top;"></a></h1>
        
        <div id="project-name-container">
             <span id="project-name">My Project</span>
             <button id="rename-btn" title="Rename Project" class="icon-btn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
             </button>
        </div>

        <div style="flex: 1;"></div> 
        <!-- Controls -->
        <button id="run-btn" class="action-btn btn-run">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg> Run
        </button>
        <button id="stop-btn" class="action-btn btn-stop">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg> Stop
        </button>

        <div class="separator"></div>

        <button id="new-btn" class="action-btn btn-new">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg> New
        </button>
        <button id="open-btn" class="action-btn btn-open">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg> Open
        </button>

        <div class="separator"></div>
        
        <button id="download-btn" class="action-btn btn-download">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> Download
        </button>
        <button id="load-btn" class="action-btn btn-upload">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> Upload
        </button>
        <button id="share-btn" class="action-btn btn-share">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg> Share
        </button>
        <button id="settings-btn" class="icon-btn btn-settings" title="Settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </button>
        <input type="file" id="file-input" accept=".py,.zip,.vert,.frag,.glsl,.txt,.json,.csv,.md">
        <input type="file" id="upload-input">
    </header>

    <main>
        <div id="file-panel">
            <div id="file-list-header">
                <span>FILES</span>
                <button id="upload-file-btn" title="Upload File" class="icon-btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                </button>
                <button id="add-file-btn" title="New File" class="icon-btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
            </div>
            <ul id="file-list"></ul>
        </div>
        
        <div id="editor-container">
            <div id="editor-top-bar">
                <button id="toggle-sidebar-btn" title="Toggle File Panel" class="icon-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>
                </button>
                <span id="current-file-label">sketch.py</span>
            </div>
            <div id="editor"></div>
            <div id="h-resizer"></div>
            <div id="console-container">
                <div id="console-header">
                    <span>Console</span>
                    <button id="clear-console" style="padding: 2px 6px; font-size: 10px; background: #666; color: white; border: 1px solid #777; cursor: pointer;">Clear</button>
                </div>
                <div id="console-content"></div>
            </div>
        </div>
        <div id="v-resizer"></div>
        <div id="preview-container">
            <iframe id="runner-frame"></iframe>
        </div>
    </main>

    <!-- Overlay for Modals -->
    <div id="modal-overlay"></div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-dialog">
         <h2 style="margin-top:0;">Settings</h2>
         
         <div style="margin-bottom: 10px;">
             <label style="color:#eee; display:block; margin-bottom:5px;">Theme</label>
             <select id="setting-theme" style="width:100%; padding:5px; background:#444; color:#fff; border:1px solid #555;">
                 <option value="dark">Dark</option>
                 <option value="light">Light</option>
             </select>
         </div>

         <div style="margin-bottom: 10px;">
             <label style="color:#eee; display:block; margin-bottom:5px;">Font Size (px)</label>
             <input type="number" id="setting-fontsize" style="width:100%; padding:5px; background:#444; color:#fff; border:1px solid #555;" min="10" max="32">
         </div>

         <div style="margin-bottom: 10px;">
             <label style="color:#eee; display:flex; align-items:center;">
                 <input type="checkbox" id="setting-softtabs" style="margin-right:10px;"> Soft Tabs (Spaces)
             </label>
         </div>

         <div style="margin-bottom: 15px;">
             <label style="color:#eee; display:flex; align-items:center;">
                 <input type="checkbox" id="setting-invisibles" style="margin-right:10px;"> Show Invisibles
             </label>
         </div>

         <div style="text-align: right;">
            <button id="close-settings-btn" style="background: #555;">Close</button>
        </div>
    </div>

    <!-- Projects Modal -->
    <div id="projects-modal" class="modal-dialog">
         <h2 style="margin-top:0;">Open Project</h2>
         <div id="project-list-container" style="max-height: 300px; overflow-y: auto; margin-bottom: 10px; border: 1px solid #555; background: #222;">
             <ul id="project-list" style="list-style: none; padding: 0; margin: 0;"></ul>
         </div>
         <div style="text-align: right;">
            <button id="close-projects-btn" style="background: #555;">Close</button>
        </div>
    </div>

    <!-- Application Logic -->
    <script src="js/settings.js?v=1"></script>
    <script src="js/name_generator.js?v=1"></script>
    <script src="js/project_manager.js?v=2"></script>
    <script src="js/ide_ui.js?v=2"></script>
</body>
</html>
